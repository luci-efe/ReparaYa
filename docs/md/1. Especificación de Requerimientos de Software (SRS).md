# Especificación de Requerimientos de  Software (SRS)

**Producto:** x (marketplace cliente–contratista)  
**Versión:** 1.1 (revisión posterior a feedback)  
**Fecha:** 11/09/2025  
**Estado:** Borrador para aprobación  
**Autores:** Equipo de Producto/Ingeniería

## 0\. Control de cambios

| Versión | Fecha | Autor | Descripción |
| :---: | :---: | :---: | :---: |
| 1,2 | 09/09/2025 | PM | Revisión completa: correcciones de ambigüedades y apartados faltantes agregados.  |
| 1.1 | 11/09/2025 | Equipo | Revisión completa: referencias normativas, supuestos/dependencias, NFR de desempeño por servicio, remoción de esquemas de BD (mover a SDD), criterios de degradación y trazabilidad. |
| 1.0 | 08/2025 | Equipo | Primera versión del SRS. |

## 1\. Introducción

### **1.1 Propósito**

Este documento define los requerimientos funcionales y no funcionales del sistema **Plataforma de Servicios Locales**, como plomería, electricidad, limpieza, carpintería, reparación de electrodomésticos. Sirve de contrato entre stakeholders (negocio, ingeniería, QA, legal) y como base para diseño, implementación, pruebas y aceptación.

### **1.2 Alcance**

La plataforma conecta **clientes** que necesitan un servicio con **contratistas** que ofrecen dicho servicio (p. ej., mantenimiento, reparaciones). Esta versión cubre **Web responsive** como canal principal. **Aplicaciones móviles nativas** están fuera de alcance del presente MVP.

### **1.3 Definiciones y acrónimos**

* **Cliente / Contratista**: Roles principales de usuario.  
* **Reserva**: Solicitud confirmada para la prestación de un servicio en fecha/hora/ubicación.  
* **P50/P95/P99**: Percentiles de tiempo de respuesta medidos extremo a extremo (TTFB a TTFX, salvo notas).  
* **RPS**: Solicitudes por segundo (Requests Per Second).  
* **BR**: Regla de negocio. **RF**: Requisito funcional. **RNF**: Requisito no funcional. **STP**: Prueba del sistema (System Test Procedure).

### **1.4 Referencias normativas**

* **ISO/IEC/IEEE 29148:2018** — Ingeniería de requisitos (guía de contenido SRS).  
* **IEEE 830** — Estructura histórica de SRS (referencia secundaria).  
* **OWASP ASVS / Top 10** — Seguridad de aplicaciones web.  
* **WCAG 2.1 AA** — Accesibilidad.  
* **LFPDPPP** — Protección de datos personales en posesión de particulares.  
* **PCI DSS** — Aplicable indirectamente vía pasarela de pagos; el sistema **no** almacena PAN/CVV.  
* **Términos de servicio y políticas de Stripe** — Para pagos, cargos y webhooks.

### **1.5 Suposiciones y dependencias**

* Usuarios y catálogo inicial en **escala de cientos**.  
* Sin aplicaciones móviles nativas en el MVP.  
* Uso de pasarela de pagos (p. ej., **Stripe**) para anticipos y liquidaciones.  
* Almacenamiento de medios (imágenes) en CDN/objeto; envío de emails vía proveedor externo.  
* Servicio de mapas y geocodificación de tercero.  
* Operación primaria en una región de nube; latencia de red local estándar.  
* Soporte para **idioma español**; multi-idioma fuera de alcance del MVP.

### **1.6 Visión general del documento**

El SRS está organizado en: descripción del producto (Sección 2), requerimientos específicos (Sección 3), entorno y restricciones (Sección 4), modelo de información conceptual (Sección 5), criterios de aceptación (Sección 6), trazabilidad (Sección 7\) y anexos (Sección 8).

## 2\. Descripción general del producto

### **2.1 Perspectiva**

Marketplace web con: búsqueda/descubrimiento de servicios locales, perfiles, agenda y reservas, pagos con anticipo, check-in y liquidación al completar, calificaciones, mensajería básica, y un panel administrativo mínimo.

### **2.2 Funciones de alto nivel**

1. Descubrir servicios por ubicación/categoría.  
2. Ver detalle de servicio y perfil de contratista.  
3. Crear cuenta e iniciar sesión (cliente/contratista).  
4. Gestionar disponibilidad y publicación de servicios (contratista).  
5. Reservar con anticipo (pasarela externa).  
6. Marcar **ON\_SITE** y **COMPLETADO**; liberar liquidación.  
7. Mensajería básica (cliente–contratista) dentro de cada reserva.  
8. Calificaciones y comentarios.  
9. Panel admin: revisión de reportes, disputas, categorías y bloqueos.

### **2.3 Usuarios y características**

* **Cliente**: busca, reserva, paga anticipo, califica.  
* **Contratista**: pública servicios, define precio y disponibilidad, recibe pagos, responde mensajes.  
* **Admin**: gestiona catálogo, moderación, disputas y métricas básicas.

### **2.4 Restricciones de negocio y técnicas (resumen)**

* Debe operar con pasarela de pagos; el sistema no guarda datos sensibles de tarjeta.  
* Cumplir LFPDPPP; consentimiento y derechos ARCO.  
* Registros y auditorías mínimos para conciliación y disputas.

### **2.5 Fuera de alcance (MVP)**

* Apps móviles nativas.  
* Programas de lealtad/monederos, cupones avanzados.  
* Enrutamiento/optimización multi-contratista.  
* Recomendaciones ML, segmentación avanzada.


### **2.6 Flujo de Negocio (Happy path)**

1. Cliente busca servicio por ubicación/categoría  
2. Cliente selecciona contratista y agenda fecha/hora  
3. Sistema cobra anticipo (ej: 30% del precio total Pc)  
4. Contratista recibe notificación de reserva CONFIRMADA  
5. En la fecha, contratista marca ON\_SITE al llegar  
6. Al terminar, contratista marca COMPLETADA  
7. Sistema libera liquidación (B \- comisión C%) al contratista  
8. Cliente puede calificar el servicio

## 3\. Requerimientos específicos

### **3.1 Requerimientos funcionales (RF)**

**RF-001 Búsqueda y listado**  
El sistema permitirá buscar servicios por municipio/colonia/categoría, con orden por relevancia y paginación. **STP-RF-001**.

**RF-002 Detalle del servicio**  
El sistema mostrará descripción, precio base, fotos, ubicación aproximada, disponibilidad y calificaciones. **STP-RF-002**.

**RF-003 Registro e inicio de sesión**  
Email \+ contraseña y/o proveedor social (opcional). Verificación de email. **STP-RF-003**.

**RF-004 Publicación y disponibilidad (contratista)**  
Alta de servicio(s), agenda (bloques/horarios), activar/desactivar publicación. **STP-RF-004**.

**RF-005 Reserva y checkout**  
Creación de reserva y cobro de **anticipo** mediante pasarela; el sistema almacenará únicamente **tokens/IDs** de pago. **STP-RF-005**.

**RF-006 Estados de reserva**  
Estados: *PENDIENTE\_PAGO*, *CONFIRMADA*, *ON\_SITE*, *COMPLETADA*, *CANCELADA*, *DISPUTA*. Transiciones válidas definidas. **STP-RF-006**.

* PENDIENTE\_PAGO → (pago exitoso) → CONFIRMADA   
* CONFIRMADA → (llega contratista) → ON\_SITE   
* ON\_SITE → (termina trabajo) → COMPLETADA   
* \[Cualquier estado antes de COMPLETADA\] → CANCELADA   
* \[Cualquier estado\] → DISPUTA

**RF-007 Webhooks de pago**  
Procesamiento idempotente de eventos de pasarela (p. ej., payment\_intent.succeeded, charge.refunded). **STP-RF-007**.

**RF-008 Mensajería**  
Mensajes dentro del contexto de una reserva; retención mínima 7 días posteriores a cierre. **STP-RF-008**.

**RF-009 Calificaciones**  
Calificación de 1–5 estrellas por reserva; comentario opcional sujeto a moderación. **STP-RF-009**.

**RF-010 Liquidación**  
Tras **COMPLETADA**, se libera el pago al contratista menos comisiones/fees. **STP-RF-010**.

**RF-011 Admin básico**  
Moderación de contenido, categorías, bloqueo de usuarios/servicios, resolución de disputas. **STP-RF-011**.

**RF-012 Notificaciones**  
Correos transaccionales (creación de cuenta, confirmación de reserva, recordatorios, actualizaciones de estado). **STP-RF-012**.

### **3.2 Reglas de negocio (BR)**

**BR-001 Precios y recargos**

* Precio base del servicio: **B**.  
* Recargo de plataforma (por procesamiento/operación): **R%** aplicado sobre **B**.  
* **Precio al cliente**: **Pc \= B × (1 \+ R)**.

**BR-002 Comisiones**

* Comisión total de plataforma: **C%** aplicado sobre **B** (no sobre Pc).  
* **Ingreso del contratista**: **Ic \= B − (C% × B)**, menos **fees** de pasarela cuando apliquen.  
* Las tasas **R** y **C** serán configuradas globalmente.

**BR-003 Anticipo y liquidación**

* Anticipo cobrado al reservar: **A%** de **Pc** (configurable).  
* Liquidación al contratista ocurre al marcar **COMPLETADA** (o tras ventana de retención **T** horas si aplica disputa).

**BR-004 Cancelaciones**

* Política por ventanas de tiempo (p. ej., ≥24h sin penalización, \<24h penalización **P%**).

**BR-005 Disputas**

* Apertura por cualquiera de las partes; soporte adjunta evidencia; resolución admin con reglas predefinidas.

**BR-006 Facturación**

* Emisión de comprobantes según legislación local, cuando aplique.

**BR-007 KYC/Verificación**

* Contratistas deben completar verificación mínima (ID fiscal/bancaria) si cobran a través de la plataforma.

***Ejemplo práctico:***

* *Servicio base: $1,000 MXN*  
* *Cliente paga: $1,100 (1000 × 1.10)*  
* *Anticipo cobrado: $330 (30% de 1100\)*  
* *Contratista recibe: $850 (1000 \- 15%)*


### **3.3 Requisitos de interfaces de usuario**

* Web responsive (≥360px).  
* Idioma español; textos clave parametrizables.  
* WCAG 2.1 AA: contraste, foco visible, navegación por teclado en flujos críticos.

### **3.4 Modelo de información (conceptual, no-DDL)**

**Entidades principales:**

* **Usuario**(id, rol∈{cliente, contratista, admin}, email, nombre, estado, fecha\_alta)  
* **Servicio**(id, contratista\_id, categoría\_id, título, descripción, precio\_base\_B, ubicación\_zona, fotos\[\])  
* **Disponibilidad**(servicio\_id, fecha/hora, bloque, estado)  
* **Reserva**(id, servicio\_id, cliente\_id, estado, fecha\_hora, dirección, notas)  
* **Pago**(id, reserva\_id, tipo∈{anticipo, liquidación, reembolso}, monto, moneda, pasarela\_id, estado)  
* **Mensaje**(id, reserva\_id, emisor\_id, texto, timestamp)  
* **Calificación**(id, reserva\_id, estrellas∈\[1..5\], comentario)

**Relaciones claves:**

* Usuario(contratista) 1..N Servicio.  
* Servicio 1..N Reserva.  
* Reserva 1..N Mensaje; 0..1 Calificación; 1..N Pago.

### **3.5 Requisitos no funcionales (RNF)**

#### **3.5.1 Desempeño**

**Objetivo global**: salvo mención, **P95 ≤ 2.0 s** y **P99 ≤ 3.5 s** en flujos críticos.  
**Escala de prueba “cientos” (prod-like):**

* Dataset: **≥300 servicios**, **≥200 usuarios**, **≥200 reservas históricas**, 1–3 fotos por servicio.  
* Carga: **10 RPS** sostenidos con ráfagas de **30 RPS** por 60 s cada 10 min.  
* Red: misma región; latencia de cliente no controlada; TTFB incluye app+DB+cache y exclusiones anotadas.  
  Cold starts: \+300 ms permitidos a **P95** en los primeros 60 s tras despliegue.

**Presupuestos por flujo/servicio**

| Flujo/Servicio | P50 (s) | P95 (s) | P99 (s) | Notas |
| ----- | ----- | ----- | ----- | ----- |
| Buscar servicios (ubicación/categoría) | 0.3 | 1.2 | 2.0 | Índices por zona/categoría, paginación 20 |
| Ver detalle de servicio | 0.25 | 1.0 | 1.8 | Imágenes servidas vía CDN; caché 5–15 min. |
| Crear reserva \+ crear intento de pago | 0.5 | 1.5 | 2.5 | Incluye pre-autorización; **excluye** redirección/UX de pasarela. |
| Confirmar pago (callback/webhook) | 0.2 | 0.8 | 1.2 | Idempotencia por clave pasarela\_id. |
| Marcar ON\_SITE | 0.2 | 0.8 | 1.2 | Actualiza estado y bitácora. |
| Marcar COMPLETADA | 0.25 | 1.0 | 1.8 | Dispara liquidación diferida. |
| Mensajería (enviar/recibir) | 0.12 | 0.6 | 1.0 | SSE/WebSocket opcional; fallback a long-poll. |
| Listar reservas (cliente/contratista) | 0.3 | 1.2 | 2.0 | Filtros por estado/fecha; paginación. |
| Panel admin: resolver disputa | 0.4 | 1.5 | 2.5 | Incluye carga de evidencias (no \>5MB por archivo). |

#### 

#### **3.5.1.1 ¿Qué son los Percentiles?**

Los percentiles son medidas estadísticas que describen la distribución de tiempos de respuesta en un sistema. A diferencia del promedio aritmético, los percentiles son robustos ante valores atípicos (outliers) y reflejan mejor la experiencia real del usuario.

**Definiciones:**

* **P50 (Mediana):** El 50% de las solicitudes se completan en este tiempo o menos. Representa la experiencia del usuario típico.  
* **P95: El 95%** de las solicitudes se completan en este tiempo o menos. Representa la experiencia de la gran mayoría de usuarios, incluyendo condiciones normales de carga.  
* **P99:** El 99% de las solicitudes se completan en este tiempo o menos. Representa la experiencia incluso en casos casi excepcionales, capturando comportamiento bajo picos de carga o condiciones subóptimas.

**Degradación controlada y timeouts**

* Timeouts de API: 10 s; mensajes de error claros y accionables.  
* Si pasarela de pagos falla: permitir navegación y mensajería; **bloquear nuevas reservas** y mostrar banner.  
* Si CDN/imágenes falla: ocultar miniaturas; mantener esenciales (texto, precio, disponibilidad).  
* Retries exponenciales (máx. 3\) para webhooks; cola de reintentos con D/LQ.

#### **3.5.2 Disponibilidad y continuidad**

* Disponibilidad objetivo: **≥99.5% mensual** para el frontend y API pública.  
* Mantenimiento planificado con aviso ≥24h; ventana ≤1h fuera de horario pico.

#### 

#### **3.5.3 Seguridad**

* Autenticación con hashing robusto (p. ej., Argon2/BCrypt), MFA opcional.  
* Autorización por rol y por recurso (propietario de reserva, admin).  
* Protección CSRF/XSS/SQLi; validación y saneamiento de inputs.  
* Logs de auditoría en acciones sensibles (pagos, estados, admin).  
* No almacenar datos de tarjeta; usar tokens de pasarela.

#### **3.5.4 Privacidad y cumplimiento**

* Aviso de privacidad, consentimiento y **derechos ARCO**; borrado/anonimización bajo solicitud.  
* Retención mínima: mensajes 7 días tras cierre de reserva; logs de pago según conciliación (p. ej., 12 meses).

#### **3.5.5 Usabilidad y accesibilidad**

* WCAG 2.1 AA en flujos críticos.  
* Tiempo de sesión configurable (p. ej., 30 min inactividad).

#### **3.5.6 Observabilidad**

* Métricas clave por endpoint (latencias P50/P95/P99, tasa de errores).  
* Trazas distribuidas para checkout y webhooks.  
* Dashboards de negocio: reservas/día, tasa de conversión, disputas, NPS.

#### **3.5.7 Compatibilidad**

* Navegadores soportados: últimas 2 versiones de Chrome/Edge/Firefox y Safari actual.

#### 

#### **3.5.8 Escalabilidad (hacia miles)**

* Debe existir plan de índices y cachés para escalar a **miles** sin rediseño mayor (p. ej., particiones por zona).

## 4\. Entorno de operación y restricciones (solo lo que es requisito)

* Despliegue en nube comercial; almacenamiento de medios en CDN/objeto.  
* Base de datos relacional con integridad referencial.  
* Región primaria definida por negocio (latencia local).  
* Emails transaccionales vía proveedor externo.

## 5\. Modelo de información — vista conceptual

* Diagrama ER conceptual adjunto en SDD; en SRS se definen **entidades/relaciones y reglas** (Sección 3.4).  
* Reglas de integridad: una **Calificación** requiere **Reserva** en **COMPLETADA**; un **Mensaje** debe pertenecer a una **Reserva**; **Pago** debe vincularse a un evento de pasarela válido.

## 6\. Criterios de aceptación (resumen)

* **CA-001 Búsqueda**: con dataset de prueba “cientos”, 95% de consultas responden **≤1.2 s** y resultados relevantes por categoría/ubicación.  
* **CA-002 Reserva/Checkout**: creación de reserva y redirección a pasarela en **≤1.5 s**; al recibir webhook, estado pasa a **CONFIRMADA** en **≤1.2 s**.  
* **CA-003 Estados**: transiciones inválidas son rechazadas con mensaje claro; trazabilidad en bitácora.  
* **CA-004 Mensajería**: envío/recepción en **≤0.6 s (P95)**; retención 7 días tras cierre.

* **CA-005 Liquidación**: al marcar **COMPLETADA**, se agenda liquidación conforme a BR-003; conciliación refleja montos y comisiones.  
* **CA-006 Seguridad**: pruebas OWASP básicas superadas; ningún dato de tarjeta almacenado.  
* **CA-007 Privacidad**: flujo de solicitud ARCO disponible; evidencia de anonimización/borrado.

## 7\. Trazabilidad (plantilla)

| ID Requisito | Caso de Uso | Criterio de Aceptación | STP | Estado |
| :---: | :---: | :---: | :---: | :---: |
| RF-001 | UC-BuscarServicios | CA-001 | STP-RF-001 | Pendiente |
| RF-005 | UC-ReservaCheckout | CA-002 | STP-RF-005 | Pendiente |
| RF-006 | UC-EstadosReserva | CA-003 | STP-RF-006 | Pendiente |
| RF-008 | UC-Mensajería | CA-004 | STP-RF-008 | Pendiente |
| RF-010 | UC-Liquidación | CA-005 | STP-RF-010 | Pendiente |

## 

## 8\. Anexos

### **8.1 Riesgos iniciales**

* Dependencia de terceros (pasarela/CDN/mapas); definir **plan de degradación** (Sección 3.5.1).  
* Moderación de contenido y disputas: carga operativa; definir SLAs internos.


### **8.2 Datos de prueba (mínimos)**

* 300 servicios con 1–3 fotos cada uno.  
* 200 usuarios (mezcla de clientes/contratistas).  
* 200 reservas históricas con estados diversos.

### **8.3 Glosario**

* **Anticipo**: porcentaje cobrado al reservar.  
* **Liquidación**: pago al contratista tras completar servicio.  
* **Degradación controlada**: funcionalidad esencial disponible con servicios externos fallando.

## 9\. Aprobaciones

| Rol | Nombre | Firma | Fecha |
| ----- | ----- | ----- | ----- |
| Cliente |  |  |  |

