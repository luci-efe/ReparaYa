# ==============================================================================
# CONFIGURACIÓN DE ENTORNO - ReparaYa
# ==============================================================================
# Copia este archivo a .env.local y completa con tus credenciales reales.
# NUNCA subas el archivo .env.local al repositorio.
# ==============================================================================

# ------------------------------------------------------------------------------
# BASE DE DATOS
# ------------------------------------------------------------------------------
# Cadena de conexión a PostgreSQL. Formato:
# postgresql://[usuario]:[contraseña]@[host]:[puerto]/[nombre_bd]?schema=public
# Para desarrollo local, asegúrate de que PostgreSQL esté corriendo en localhost:5432
DATABASE_URL="postgresql://user:password@localhost:5432/reparaya?schema=public"

# ------------------------------------------------------------------------------
# AUTENTICACIÓN (Clerk)
# ------------------------------------------------------------------------------
# Clerk proporciona autenticación, gestión de usuarios y webhooks.
# Obtén tus claves en: https://dashboard.clerk.com/
# Usa las claves de "Development" para desarrollo local.

# Clave pública de Clerk (expuesta al cliente, prefijo pk_test_ para desarrollo)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY="pk_test_..."

# Clave secreta de Clerk (solo servidor, prefijo sk_test_ para desarrollo)
CLERK_SECRET_KEY="sk_test_..."

# URLs de redirección para flujos de autenticación (rutas internas de la app)
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/login
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/register
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=/
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=/

# ------------------------------------------------------------------------------
# PAGOS (Stripe)
# ------------------------------------------------------------------------------
# Stripe maneja pagos, anticipos y liquidaciones (Stripe Connect).
# Obtén tus claves en: https://dashboard.stripe.com/test/apikeys
# Usa claves de "Test mode" (prefijos pk_test_ y sk_test_) para desarrollo.

# Clave secreta de Stripe (solo servidor, para crear intents y manejar API)
STRIPE_SECRET_KEY="sk_test_..."

# Secreto del webhook de Stripe (obtenerlo al configurar webhook endpoint en Stripe)
# Usado para verificar la firma de eventos de webhook (ej: payment_intent.succeeded)
STRIPE_WEBHOOK_SECRET="whsec_..."

# Clave pública de Stripe (expuesta al cliente, para Stripe.js y elementos de pago)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="pk_test_..."

# ------------------------------------------------------------------------------
# AWS - CREDENCIALES GENERALES
# ------------------------------------------------------------------------------
# Credenciales IAM con permisos para S3, SES y Location Service.
# Crea un usuario IAM en: https://console.aws.amazon.com/iam/
# Asigna políticas: AmazonS3FullAccess, AmazonSESFullAccess, AmazonLocationFullAccess

# Región de AWS donde están desplegados los recursos (ej: us-west-2, us-east-1)
AWS_REGION="us-west-2"

# ID de clave de acceso de AWS (comienza con AKIA...)
AWS_ACCESS_KEY_ID="AKIA..."

# Clave de acceso secreta de AWS (mantener en secreto, nunca exponer públicamente)
AWS_SECRET_ACCESS_KEY="..."

# ------------------------------------------------------------------------------
# AWS S3 - ALMACENAMIENTO DE MEDIOS
# ------------------------------------------------------------------------------
# Bucket de S3 para almacenar imágenes de servicios, perfiles y evidencias.
# Crea el bucket en: https://s3.console.aws.amazon.com/
# Configura permisos públicos de lectura para imágenes si es necesario.
AWS_S3_BUCKET_MEDIA="reparaya-media-dev"

# ------------------------------------------------------------------------------
# AWS SES - EMAILS TRANSACCIONALES
# ------------------------------------------------------------------------------
# Amazon Simple Email Service para enviar correos (confirmaciones, notificaciones).
# Verifica el dominio o email en: https://console.aws.amazon.com/ses/
# En sandbox, solo puedes enviar a emails verificados.

# Dirección de correo del remitente (debe estar verificada en SES)
AWS_SES_SENDER_EMAIL="noreply@reparaya.com"

# Alias alternativo para la variable SES_SENDER_EMAIL (mantener compatibilidad)
SES_SENDER_EMAIL="noreply@reparaya.com"

# ------------------------------------------------------------------------------
# AWS LOCATION SERVICE - GEOCODIFICACIÓN Y RUTAS
# ------------------------------------------------------------------------------
# Amazon Location Service para búsqueda geográfica, geocoding y cálculo de distancias.
# Crea los recursos en: https://console.aws.amazon.com/location/

# Nombre del Place Index (índice de lugares para búsqueda y geocodificación)
AWS_LOCATION_PLACE_INDEX_NAME="reparaya-places"

# Nombre del Route Calculator (calculadora de rutas para distancias y tiempos)
AWS_LOCATION_ROUTE_CALCULATOR="reparaya-routes"

# ------------------------------------------------------------------------------
# NEXT.JS - CONFIGURACIÓN DE APLICACIÓN
# ------------------------------------------------------------------------------
# URL pública de la aplicación (para enlaces en emails, redirects, etc.)
# En desarrollo local: http://localhost:3000
# En producción: https://tu-dominio.com
NEXT_PUBLIC_APP_URL="http://localhost:3000"

# Entorno de ejecución de la aplicación (development, staging, production)
# Usado para features flags, logs y comportamiento condicional
NEXT_PUBLIC_APP_ENV="development"

# ------------------------------------------------------------------------------
# CONFIGURACIONES DE NEGOCIO
# ------------------------------------------------------------------------------
# Estas variables definen los porcentajes de comisiones y anticipos.
# Pueden moverse a la base de datos en producción para permitir ajustes dinámicos.
# Ver reglas de negocio BR-001, BR-002, BR-003 en SRS.

# Porcentaje de recargo al cliente sobre el precio base del contratista (R% en BR-001)
# Ejemplo: Si servicio cuesta $100, el cliente paga $100 + 10% = $110
PLATFORM_MARKUP_PERCENTAGE="10"

# Porcentaje de comisión de plataforma sobre el precio pagado por el cliente (C% en BR-002)
# Ejemplo: Cliente paga $110, plataforma retiene 15% = $16.50, contratista recibe $93.50
PLATFORM_COMMISSION_PERCENTAGE="15"

# Porcentaje de anticipo cobrado al cliente al confirmar reserva (A% en BR-003)
# Ejemplo: Cliente paga $110, anticipo de 30% = $33, liquidación restante = $77
BOOKING_ADVANCE_PERCENTAGE="30"
